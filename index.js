(()=>{"use strict";var t={524:(t,e,n)=>{n.d(e,{Z:()=>s});var o=n(81),r=n.n(o),a=n(645),i=n.n(a)()(r());i.push([t.id,"html {\n    font-size: 10px;\n    color:rgb(42, 42, 42);\n}\n\nbody {\n    background: rgb(249, 249, 253);\n}\n\nfooter {\n    height: 10em;\n    margin-top: 3em;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: space-around;\n}\nfooter .copyright {\n    font-size: 14px;\n    color: #333;\n    text-align: center;\n}\nfooter .copyright a {\n    color: #444;\n}\nfooter .copyright a:hover {\n    color: #555;\n}\nfooter .copyright:before {\n    content: '©';\n}\n\n.wrapper {\n  display: flex;\n  gap: 2rem;\n  flex-direction: column;\n  font-size: 1.6rem;\n  position: relative;\n}\n\n.buttons-group-wrapper {\n  display: flex;\n  border: #eee 1px solid;\n  padding: 1.5rem 2rem;\n  box-shadow: 1px 0px 10px -5px rgb(34 60 80 / 20%);\n  background-color: #fff;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  font-size: 1.6rem;\n}\n\n.product__image {\n    width: 150px;\n}\n\n.product__property {\n    color: rgb(130, 130, 130);\n}\n\n.product__name {\n    color:rgb(24, 35, 51);\n    font-weight: bold;\n    padding-bottom: 1rem;\n    font-size: 2rem;\n}\n\n.product__footer, .product__header {\n    display: flex;\n    justify-content: space-between;\n}\n\n.product__footer {\n    padding-top: 1rem;\n    align-items: center;\n}\n\n\n\n\n.button {\n    outline: none;\n    border-radius: 500px;\n    transition-property: background-color, color;\n    transition-duration: .3s;\n    border: 1px solid transparent;\n    text-transform: uppercase;\n    text-align: center;\n    padding: 0.7rem 1rem;\n    color: #3a7e52;\n    box-shadow: inset 0 0 0 1px #3a7e52;\n    background-color: transparent;\n    max-height: 4.2rem;\n    font-size: 1.1rem;\n}\n\n.button:hover {\n    color: #fff;\n    background-color: #3a7e52;\n}\n\n.secondary-button {\n    outline: none;\n    border-radius: 500px;\n    transition-property: background-color, color;\n    transition-duration: .3s;\n    border: 1px solid transparent;\n    text-align: center;\n    padding: 1.1rem 2rem 1rem;\n    color: #494949;\n    box-shadow: inset 0 0 0 1px #86afad;\n    background-color: transparent;\n    font-size: 1.4rem;\n    max-height: 4.2rem;\n}\n\n.secondary-button:hover {\n    color: #fff;\n    background-color: #86afad;\n}\n\n.controls-button {\n  width: 8rem;\n  font-size: 1rem;\n  padding: 0.4rem 1rem 0.4rem;\n}\n\n\n.primary-button {\n  color: #fff;\n  background-color: #3a7e52;\n}\n\n.primary-button:hover {\n  color: #fff;\n  background-color: #0a4d21;\n  box-shadow: inset 0 0 0 1px #0a4d21;\n}\n\n.button-disabled {\n  color: #fff;\n  background-color: #a5a5a5;\n  box-shadow: inset 0 0 0 1px #a5a5a5;\n}\n\n.button-disabled:hover {\n  color: #fff;\n  background-color: #a5a5a5;\n  box-shadow: inset 0 0 0 1px #a5a5a5;\n}\n\n.accented-text, a {\n    font-weight: normal;\n    color:#3c8f5a;\n}\n\nlabel {\n    text-transform: capitalize;\n}\n\ninput, label, button {\n    cursor: pointer;\n}\n\n.overlay {\n  display: none;\n  width: 100%;\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n}\n\n.pop-up {\n  box-shadow: 0px 0px 0px 1000px rgb(34 60 80 / 70%);\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 8px;\n  gap: 2rem;\n  background-color: #eee;\n}\n\n\n@keyframes warning-on {\n    0% {opacity: 0;}\n    100% {opacity: 1;}\n}\n\n.cart {\n    font-size: 1.8rem;\n    color:#3c8f5a;\n}\n\n.actions {\n    grid-area: actions;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n}\n\n.search-message {\n    min-height: 2rem;\n    font-size: 1.8rem;\n    padding: 1rem 0;\n}\n\n.search, .sort, .create {\n    width: 12rem;\n    border: 1px solid #3a7e52;\n    padding: 0.5rem;\n    border-radius: 0.5rem;\n    outline: none;\n    color: #3a7e52;\n}\n\n.sort {\n  width: 20rem;\n}\n\n\n.tabs {\n    display: flex;\n    gap: 2rem;\n    justify-content: center;\n    font-size: 2rem;\n    border-bottom: 1px #bebebe solid;\n}\n\n.tab__active {\n  color: #3a7e52;\n    border-bottom: 3px #3a7e52 solid;\n}\n\n.tab {\n  padding: 0.2rem 1rem;\n  cursor: pointer;\n}\n\n\n.car-image {\n  width: 7rem;\n  height: auto;\n}\n\n.car-line {\n  display: flex;\n  gap: 2rem;\n  border-bottom: #bebebe dashed 1px;\n  justify-content: space-between;\n  align-items: flex-end;\n}\n\n.left-side {\n  display: flex;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n\n\n.controls {\n  display: flex;\n  gap: 0.5rem;\n  min-width: 17rem;\n  max-width: 17.1rem;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-content: flex-start;\n}\n\n.controls-popup{\n  display: flex;\n  gap: 2rem;\n  padding: 2rem;\n  border-top: 1px solid #bebebe;\n}\n\n.cars-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.car-info {\n  display: flex;\n  gap: 1rem;\n  font-size: 1.6rem;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n\n.generate {\n  padding-left: 2rem;\n    border-left: 1px solid #bebebe;\n}\n\n\n.flag {\n  color: red;\n  padding-right: 8rem;\n  font-weight: bold;\n}\n\n\n.blink {\n  animation: blink-animation 0.5s steps(5, start) infinite;\n}\n@keyframes blink-animation {\n  to {\n    visibility: hidden;\n  }\n}\n\n.general-buttons-wrapper {\n  display: flex;\n  justify-content: space-around;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n\n.message {\n  width: 100%;\n  min-height: 1rem;\n  margin-left: 18.1rem;\n  color: #737373;\n}\n\n.winners-table {\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n}\n\n.table {\n  font-size: 1.2rem;\n  border: 1px solid #ccc;\n  border-collapse: collapse;\n  margin: 0;\n  padding: 0;\n  width: 49rem;\n  table-layout: fixed;\n}\n\n.table tr {\n  border: 1px solid #bebebe;\n}\n\n.table th,\n.table td {\n  text-align: center;\n}\n\n.table th {\n  text-transform: uppercase;\n}\n\n.car-image-table {\n  width: 5rem;\n}",""]);const s=i},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);o&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var a={},i=[],s=0;s<t.length;s++){var c=t[s],d=o.base?c[0]+o.base:c[0],l=a[d]||0,u="".concat(d," ").concat(l);a[d]=l+1;var p=n(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var f=r(m,o);o.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var a=o(t=t||[],r=r||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var s=n(a[i]);e[s].references--}for(var c=o(t,r),d=0;d<a.length;d++){var l=n(a[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}a=c}}},569:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={id:o,exports:{}};return t[o](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t=n(379),e=n.n(t),o=n(795),r=n.n(o),a=n(569),i=n.n(a),s=n(565),c=n.n(s),d=n(216),l=n.n(d),u=n(589),p=n.n(u),m=n(524),f={};f.styleTagTransform=p(),f.setAttributes=c(),f.insert=i().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=l(),e()(m.Z,f),m.Z&&m.Z.locals&&m.Z.locals;const v="http://127.0.0.1:3000";var b,y,h;!function(t){t[t.success=200]="success",t[t.error=400]="error",t[t.notFound=404]="notFound",t[t.tooManyRequests=429]="tooManyRequests",t[t.internalServerError=500]="internalServerError"}(b||(b={})),function(t){t.started="started",t.stopped="stopped"}(y||(y={})),function(t){t.next="next",t.prev="prev"}(h||(h={}));const g=["Tesla","Ford","Laraki","Porche","Mercedes","Bently","BMW","Ferrari","Fiat","Jeep"],x=["Model S","M-6000","LX-3","GX","SV","SX","GT","JH","WH","SI"],w='\n<path fill-rule="evenodd" clip-rule="evenodd" d="M290.695 46.3893C290.695 46.3893 307.373 53.7799 315.144 61.7413C315.144 61.7413 291.452 67.9946 290.695 46.3893ZM6.97595 68.4719C6.97595 68.4719 0 71.9599 0 53.4733C0 34.9879 8.37195 38.1279 8.37195 38.1279V13.7119H14.9987L25.2972 27.6639H46.0413C46.0413 27.6639 64.1772 13.0146 91.3827 13.0146C91.3827 13.0146 96.6133 32.5466 125.563 32.5466H141.259C138.468 24.1759 137.073 13.7119 144.397 13.7119C151.723 13.7119 155.908 32.5466 155.908 32.5466H201.599L170.905 1.85461C170.905 1.85461 170.963 -2.7494 177.184 2.55059C177.184 2.55059 207.877 29.0586 213.457 30.8026H254.963C254.963 30.8026 301.351 41.9639 319.836 61.1466C319.836 61.1466 325.767 78.2373 314.605 78.2373H276.936C276.936 78.2373 281.739 40.3946 245.332 40.3946C208.923 40.3946 214.503 78.2373 214.503 78.2373H84.756C84.756 78.2373 88.2627 40.3946 52.328 40.3946C16.3933 40.3946 20.5787 78.2373 20.5787 78.2373H6.97595V68.4719ZM32.2622 71.5014C32.2622 60.4361 41.2635 51.4334 52.3289 51.4334C63.3942 51.4334 72.3955 60.4361 72.3955 71.5014C72.3955 82.5667 63.3942 91.5681 52.3289 91.5681C41.2635 91.5681 32.2622 82.5667 32.2622 71.5014ZM25.2969 71.5014C25.2969 86.4294 37.3995 98.5307 52.3289 98.5307C67.257 98.5307 79.3582 86.4294 79.3582 71.5014C79.3582 56.5721 67.257 44.4707 52.3289 44.4707C37.3995 44.4707 25.2969 56.5721 25.2969 71.5014ZM52.3287 57.4426C60.0793 57.4426 66.3861 63.7493 66.3861 71.5013C66.3861 79.252 60.0793 85.5586 52.3287 85.5586C44.5781 85.5586 38.2701 79.252 38.2701 71.5013C38.2701 63.7493 44.5781 57.4426 52.3287 57.4426ZM259.389 71.5013C259.389 63.7493 253.082 57.4426 245.331 57.4426C237.581 57.4426 231.274 63.7493 231.274 71.5013C231.274 79.252 237.581 85.5586 245.331 85.5586C253.082 85.5586 259.389 79.252 259.389 71.5013ZM225.265 71.5014C225.265 60.4361 234.268 51.4334 245.332 51.4334C256.397 51.4334 265.398 60.4361 265.398 71.5014C265.398 82.5667 256.397 91.5681 245.332 91.5681C234.268 91.5681 225.265 82.5667 225.265 71.5014ZM218.3 71.5014C218.3 86.4294 230.404 98.5307 245.332 98.5307C260.26 98.5307 272.361 86.4294 272.361 71.5014C272.361 56.5721 260.26 44.4707 245.332 44.4707C230.404 44.4707 218.3 56.5721 218.3 71.5014Z" />\n',E=10,C=["By wins number (asc)","By best time (asc)","By wins number (desc)","By best time (desc)"];var A=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))};const L=`${v}/garage/`,$=(t,e)=>A(void 0,void 0,void 0,(function*(){var n;const o=`${L}?_limit=${t}&_page=${e}`;try{const t=yield fetch(o);return{data:yield t.json(),count:null===(n=t.headers.get("X-Total-Count"))||void 0===n?void 0:n.toString()}}catch(t){return null}})),T=t=>A(void 0,void 0,void 0,(function*(){const e=`${L}${t}`;try{const t=yield fetch(e);return yield t.json()}catch(t){return null}})),S=t=>A(void 0,void 0,void 0,(function*(){const e=L,n={"Content-Type":"application/json"},o=JSON.stringify(t);try{const t=yield fetch(e,{method:"POST",headers:n,body:o});return{data:yield t.json()}}catch(t){return null}}));var H=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))};const k=`${v}/engine/`,M=(t,e)=>H(void 0,void 0,void 0,(function*(){const n=`${k}?id=${t}&status=${e}`;let o;try{return o=yield fetch(n,{method:"PATCH"}),yield o.json()}catch(t){return null==o?void 0:o.status}})),_=t=>H(void 0,void 0,void 0,(function*(){const e=`${k}?id=${t}&status=drive`;let n;try{return n=yield fetch(e,{method:"PATCH"}),n}catch(t){return n}})),P=(t,e)=>{let n,o=0;const r=document.getElementById(String(t)),a=document.getElementById(`flag-${t}`);if(r&&a){const t=r.getBoundingClientRect().x+r.clientWidth,i=a.getBoundingClientRect().x-t+80,s=i/e;let c,d,l=!1;n=t=>{c||(c=t);const a=t-c;if(d!==t){const t=s*a;r.style.transform=`translateX(${t}px)`,t===i&&(l=!0)}a<e&&(d=t,l||(o=requestAnimationFrame(n)))}}return{start:()=>{o=requestAnimationFrame(n)},stop:()=>{cancelAnimationFrame(o)}}};var j=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))};const B=`${v}/winners/`,I=(t,e,n,o)=>j(void 0,void 0,void 0,(function*(){var r;const a=`${B}?_page=${t}&_limit=${e}&_sort=${n}&_order=${o}`;let i;try{i=yield fetch(a)}catch(t){return null}return{data:yield i.json(),count:null===(r=i.headers.get("X-Total-Count"))||void 0===r?void 0:r.toString()}}));var N=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))};const F=(t,e,n,o,r,a,i)=>N(void 0,void 0,void 0,(function*(){const n=document.getElementById("winners-table");n&&(n.innerHTML="");const o=document.createElement("select");o.setAttribute("class","sort"),o.setAttribute("id","sort");const s=document.createElement("option");s.setAttribute("disabled","true"),s.setAttribute("selected","true"),s.innerText="Select sorting",o.append(s),C.map((t=>{const e=document.createElement("option");e.setAttribute("value",t),e.innerText=t,o.append(e)})),o.addEventListener("change",(()=>{o.setAttribute("disabled","true"),i.sortHandler(o.value,t,F,a,i)})),null==n||n.append(o);const c=document.createElement("table");c.classList.add("table");const d=document.createElement("thead");d.innerHTML="\n  <tr>\n    <th>№</th>\n    <th>Image of the car</th>\n    <th>Name of the car</th>\n    <th>Wins number</th>\n    <th>Best time in seconds</th>\n  </tr>\n";let l=t*e-e+1;if(r&&r.count){const o=document.createElement("div");o.innerHTML=`Winners (page: ${t} of ${Math.ceil(Number(r.count)/e)})`,null==n||n.append(o);const s=document.createElement("tbody"),u=r.data.map((t=>fetch(`${v}/garage/${t.id}`)));(yield Promise.all(u)).forEach((t=>N(void 0,void 0,void 0,(function*(){const e=yield t.json();r.data.forEach((t=>{if(t.id===e.id){const n=document.createElement("tr");n.innerHTML=`\n          <td>${l}</td>\n          <td>\n            <svg fill="${e.color}" class="car-image-table" viewBox="0 0 322 99" xmlns="http://www.w3.org/2000/svg">${w}</svg>\n          </td>\n          <td>${e.name}</td>\n          <td>${t.wins}</td>\n          <td>${t.time}</td>\n        `,s.append(n),l+=1}}))})))),c.append(d,s),null==n||n.append(c);const p=document.createElement("div");p.classList.add("paging");const m=document.createElement("button");m.innerText="⟶";const f=document.createElement("button");f.innerText="⟵";const b=Math.ceil(Number(r.count)/e);t===b&&(m.setAttribute("disabled","true"),m.classList.add("button-disabled")),t<=1&&(f.setAttribute("disabled","true"),f.classList.add("button-disabled"));const y=` Page: ${t} / ${b} `;p.append(f,y,m),m.addEventListener("click",(()=>{const e=t+1;i.winnersPagingHandler(e,a,i)})),f.addEventListener("click",(()=>{const e=t-1;i.winnersPagingHandler(e,a,i)})),null==n||n.append(p)}})),q=F;const z=(t,e,n,o)=>{return r=void 0,a=void 0,s=function*(){const r=yield(t=>j(void 0,void 0,void 0,(function*(){const e=`${B}${t}`;let n;try{n=yield fetch(e);const t=yield n.json();return(null==n?void 0:n.status)===b.notFound?null:t}catch(t){return null==n?void 0:n.status}})))(t),a=Math.round(e/1e3);if(r){let e=a;r.time<a&&(e=r.time);const n={id:t,wins:r.wins+1,time:e};yield((t,e)=>j(void 0,void 0,void 0,(function*(){const n=`${B}${t}`,o={"Content-Type":"application/json"},r=JSON.stringify(e);let a;try{a=yield fetch(n,{method:"PUT",headers:o,body:r})}catch(t){return null==a?void 0:a.status}return{data:a.json()}})))(t,n)}else{const e={id:t,wins:1,time:a};yield(t=>j(void 0,void 0,void 0,(function*(){const e=B,n={"Content-Type":"application/json"},o=JSON.stringify(t);let r;try{return r=yield fetch(e,{method:"POST",headers:n,body:o}),{data:yield r.json()}}catch(t){return null==r?void 0:r.status}})))(e)}const i=yield I(1,E,"id","ASC");i&&q(1,E,"id","ASC",i,n,o)},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{c(s.next(t))}catch(t){e(t)}}function o(t){try{c(s.throw(t))}catch(t){e(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,o)}c((s=s.apply(r,a||[])).next())}));var r,a,i,s};const Z=`${v}/engine/`,G=(t,e)=>{Array.from(document.querySelectorAll(".button")).forEach((t=>{t.classList.add("button-disabled"),t.setAttribute("disabled","true")}));const n=Array.from(document.querySelectorAll(".flag")).map((t=>{const[e,n]=t.id.split("-");return n})),o=n.map((t=>fetch(`${Z}?id=${t}&status=${y.started}`,{method:"PATCH"})));let r=0,a=!1;Promise.all(o).then((o=>o.forEach(((o,i)=>{return s=void 0,c=void 0,l=function*(){const s=yield o.json(),{velocity:c,distance:d}=s,l=Number(d)/Number(c),u=Number(n[i]),p=P(u,l);p.start();const m=document.getElementById(`message-${u}`),f=yield _(u);if(f&&m)switch(r+=1,f.status){case b.error:m.innerText='Wrong parameters: "id" should be any positive number, "status" should be "started", "stopped" or "drive"',p.stop();break;case b.notFound:m.innerText='Engine parameters for car with such id was not found in the garage. Have you tried to set engine status to "started" before?',p.stop();break;case b.tooManyRequests:m.innerText="Drive already in progress. You can't run drive for the same car twice while it's not stopped.",p.stop();break;case b.internalServerError:m.innerText="Car has been stopped suddenly. It's engine was broken down.",p.stop();break;default:if(!a){a=!0;const n=yield T(u);n&&(m.innerHTML=`<span style="color: green; font-weight: bold;">***** ${n.name} is the Winner of this race! Congratulations! *****</span>`,z(u,Math.round(l),t,e))}}if(r===n.length){const t=document.getElementById("reset-race");null==t||t.classList.remove("button-disabled"),null==t||t.removeAttribute("disabled")}},new((d=void 0)||(d=Promise))((function(t,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function o(t){try{r(l.throw(t))}catch(t){e(t)}}function r(e){var r;e.done?t(e.value):(r=e.value,r instanceof d?r:new d((function(t){t(r)}))).then(n,o)}r((l=l.apply(s,c||[])).next())}));var s,c,d,l}))))},R=(t,e,n,o)=>{const r=new DocumentFragment,a=document.createElement("div");a.innerText=`Cars in garage: ${t.count} (7 cars per page)`,r.append(a),t.data.forEach((t=>{const a=((t,e,n,o)=>{const r=document.createElement("div");r.setAttribute("class","car-line");const a=((t,e,n,o)=>{const r=document.createElement("div");r.setAttribute("class","controls");const a=document.createElement("button");a.classList.add("button","primary-button","controls-button","button-disabled"),a.setAttribute("id",`stop-${t.id}`),a.innerText="⮜ Cancel";const i=document.createElement("button");i.classList.add("button","primary-button","controls-button"),i.setAttribute("id",`start-${t.id}`),i.innerText="Start ⮞",i.addEventListener("click",(()=>{if(!i.classList.contains("button-disabled")){let t;i.classList.toggle("started"),t=i.classList.contains("started")?y.started:y.stopped,o.startStopHandler(i,t,a,n,o)}}));const s=document.createElement("button");s.classList.add("button","controls-button"),s.setAttribute("id",`edit-${t.id}`),s.innerText="Edit",s.addEventListener("click",(t=>o.editHandler(null==t?void 0:t.target,n,o)));const c=document.createElement("button");return c.classList.add("button","controls-button"),c.setAttribute("id",`remove-${t.id}`),c.innerText="Delete",c.addEventListener("click",(t=>o.removeHandler(null==t?void 0:t.target,e,n,o))),r.append(a,i,c,s),r})(t,e,n,o),i=document.createElement("div");i.setAttribute("class","car-info");const s=document.createElement("div");s.setAttribute("id",t.id),s.innerHTML=`<svg fill="${t.color}" class="car-image" viewBox="0 0 322 99" xmlns="http://www.w3.org/2000/svg">${w}</svg>`;const c=document.createElement("div");c.innerHTML=`<span id='name-${t.id}'>${t.name}</span>`;const d=document.createElement("div");d.setAttribute("id",`message-${t.id}`),d.classList.add("message"),i.append(c,s);const l=document.createElement("div");l.classList.add("left-side"),l.append(d,a,i);const u=document.createElement("div");return u.setAttribute("id",`flag-${t.id}`),u.classList.add("flag"),u.innerHTML="|",r.append(l,u),r})(t,e,n,o);r.append(a)}));const i=((t,e,n,o)=>{const r=document.createElement("div");r.classList.add("paging");const a=document.createElement("button");a.innerText="⟶";const i=document.createElement("button");i.innerText="⟵";const s=Math.ceil(Number(t.count)/7);e===s&&(a.setAttribute("disabled","true"),a.classList.add("button-disabled")),e<=1&&(i.setAttribute("disabled","true"),i.classList.add("button-disabled"));const c=` Page: ${e} / ${Math.ceil(Number(t.count)/7)} `;return r.append(i,c,a),a.addEventListener("click",(()=>{const t=e+1;o.pagingHandler(t,n,o)})),i.addEventListener("click",(()=>{const t=e-1;o.pagingHandler(t,n,o)})),r})(t,e,n,o);return r.append(i),r},W=(t,e,n,o)=>{const r=((t,e)=>{const n=document.createElement("div");n.classList.add("tab","tab__active"),n.setAttribute("id","garage-tab"),n.innerText="Garage";const o=document.createElement("div");return o.classList.add("tab"),o.setAttribute("id","winners-tab"),o.innerText="Winners",n.addEventListener("click",(()=>t.showGarage(n,o,e))),o.addEventListener("click",(()=>t.showWinners(n,o,e))),e.navigation.append(n,o),e.navigation})(o,n),a=((t,e,n,o)=>{const r=document.createElement("div");r.classList.add("buttons-group-wrapper");const a=document.createElement("div");a.classList.add("buttons-group-wrapper");const i=document.createElement("input");i.setAttribute("class","create"),i.setAttribute("placeholder","Enter Name");const s=document.createElement("input");s.setAttribute("type","color");const c=document.createElement("button");c.setAttribute("class","button"),c.innerText="Create Car",c.addEventListener("click",(()=>o.creationHandler(i.value,s.value,e,n,o)));const d=document.createElement("div");d.classList.add("generate");const l=document.createElement("button");l.setAttribute("class","button"),l.innerText="Generate 100 Cars",l.addEventListener("click",(()=>o.generateCarsHandler(e,n,o))),d.append(l),r.append(i,s,c,d);const u=document.createElement("button");u.classList.add("button"),u.setAttribute("id","start-race"),u.innerText="Start Race",u.addEventListener("click",(()=>G(n,o)));const p=document.createElement("button");return p.classList.add("button"),p.setAttribute("id","reset-race"),p.innerText="Reset Race",null==p||p.addEventListener("click",(()=>(Array.from(document.querySelectorAll(".flag")).map((t=>{const[e,n]=t.id.split("-");return n})).map((t=>document.getElementById(String(t)))).forEach((t=>null==t?void 0:t.setAttribute("style","transform: translateX(0px)"))),Array.from(document.querySelectorAll(".message")).forEach((t=>{for(;t.firstChild;)t.removeChild(t.firstChild)})),void Array.from(document.querySelectorAll(".button")).forEach((t=>{t.classList.remove("button-disabled"),t.removeAttribute("disabled")}))))),a.append(u,p),n.generalControls.append(r,a),n.generalControls})(0,e,n,o),i=R(t,e,n,o);n.carsInGarage.append(i),n.wrapper.append(r,a,n.carsInGarage,n.winners,n.popup),document.body.append(n.wrapper)},D=(t,e,n,o)=>{const r=R(t,e,n,o),a=document.getElementById("cars-in-garage");a&&(a.innerHTML="",a.append(r))};var O=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))};const X=t=>{const e=t.id,[n,o]=e.split("-");return Number(o)},J=(t,e,n)=>O(void 0,void 0,void 0,(function*(){null==t||t.classList.add("button-disabled");const o=X(t),r=document.getElementById(`message-${o}`),a=yield M(o,e);null==n||n.classList.remove("button-disabled");const{velocity:i,distance:s}=a,c=Number(s)/Number(i),d=P(Number(o),c);if(Number(i)>0){d.start(),n.classList.contains("button-disabled")||null==n||n.addEventListener("click",(()=>O(void 0,void 0,void 0,(function*(){null==n||n.classList.add("button-disabled");const e=yield M(o,y.stopped);if(0===Number(e.velocity)){d.stop();const e=document.getElementById(String(o));e&&r&&(e.style.transform="translateX(0px)",r.innerText="",null==t||t.classList.remove("button-disabled","started"))}}))));const e=yield _(o);if(e&&r&&(null==t?void 0:t.classList.contains("started")))switch(e.status){case b.error:r.innerText='Wrong parameters: "id" should be any positive number, "status" should be "started", "stopped" or "drive"',d.stop();break;case b.notFound:r.innerText='Engine parameters for car with such id was not found in the garage. Have you tried to set engine status to "started" before?',d.stop();break;case b.tooManyRequests:r.innerText="Drive already in progress. You can't run drive for the same car twice while it's not stopped.",d.stop();break;case b.internalServerError:r.innerText="Car has been stopped suddenly. It's engine was broken down.",d.stop()}}})),U=(t,e,n,o)=>O(void 0,void 0,void 0,(function*(){const r=X(t);yield(t=>j(void 0,void 0,void 0,(function*(){const e=`${B}${t}`;let n;try{n=yield fetch(e,{method:"DELETE"});const{status:t}=n;return t}catch(t){return null==n?void 0:n.status}})))(r);const a=yield I(1,E,"id","ASC");a&&q(1,E,"id","ASC",a,n,o),yield(t=>A(void 0,void 0,void 0,(function*(){const e=`${L}${t}`;try{const t=yield fetch(e,{method:"DELETE"}),{status:n}=t;return n}catch(t){return null}})))(r);const i=yield $(7,e);i&&D(i,e,n,o)})),V=(t,e,n,o,r)=>O(void 0,void 0,void 0,(function*(){const a={name:t,color:e};yield S(a);const i=yield $(7,n);i&&D(i,n,o,r)})),Y=(t,e,n)=>O(void 0,void 0,void 0,(function*(){const o={name:e,color:n};yield((t,e)=>A(void 0,void 0,void 0,(function*(){const n=`${L}${t}`,o={"Content-Type":"application/json"},r=JSON.stringify(e);try{return{data:(yield fetch(n,{method:"PUT",headers:o,body:r})).json()}}catch(t){return null}})))(Number(t),o);const r=yield T(Number(t));if(r){const e=document.getElementById(t),n=document.getElementById(`name-${t}`);e&&n&&(e.innerHTML=`<svg fill="${r.color}" class="car-image" viewBox="0 0 322 99" xmlns="http://www.w3.org/2000/svg">${w}</svg>`,n.innerHTML=r.name)}})),K=t=>O(void 0,void 0,void 0,(function*(){const e=t.id,[n,o]=e.split("-"),r=yield T(Number(o));r&&((t,e)=>{const n=document.querySelector("#overlay");if(n){const o=document.createElement("div");o.setAttribute("id","pop-up"),o.setAttribute("class","pop-up"),o.innerHTML=`\n      <h4>Editing Car</h4>\n      ${t.name}\n      <div id="8">\n        <svg fill="${t.color}" class="car-image" viewBox="0 0 322 99" xmlns="http://www.w3.org/2000/svg"> ${w}\n        </svg>\n      </div>\n    `;const r=document.createElement("div");r.classList.add("controls-popup");const a=document.createElement("input");a.setAttribute("class","create"),a.value=t.name;const i=document.createElement("input");i.setAttribute("type","color"),i.setAttribute("value",t.color);const s=document.createElement("button");s.classList.add("button","primary-button"),s.innerText="Save",s.addEventListener("click",(()=>{e(t.id,a.value,i.value),n.setAttribute("style","display: none"),n.innerHTML=""}));const c=document.createElement("button");c.setAttribute("class","button"),c.innerText="Close",c.addEventListener("click",(()=>{n.setAttribute("style","display: none"),n.innerHTML=""}));const d=document.createElement("div");d.classList.add("controls"),d.append(c,s),r.append(a,i),o.append(r,d),n.append(o),n.setAttribute("style","display: flex")}})(r,Y)}));const Q=(t,e,n)=>{return o=void 0,r=void 0,i=function*(){const o=yield $(7,t);o&&(D(o,t,e,n),document.querySelectorAll("#general-buttons-wrapper button").forEach((t=>{t.classList.remove("button-disabled"),t.removeAttribute("disabled")})))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{c(i.next(t))}catch(t){e(t)}}function s(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof a?o:new a((function(t){t(o)}))).then(n,s)}c((i=i.apply(o,r||[])).next())}));var o,r,a,i};var tt=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))};const et=(t,e,n)=>tt(void 0,void 0,void 0,(function*(){const o=g.map((t=>x.map((e=>`${t} ${e}`)))).flat();Array.from({length:100}).forEach((()=>tt(void 0,void 0,void 0,(function*(){const t={name:o.splice(Math.floor(100*Math.random()),1)[0],color:`#${[...Array(6).keys()].map((()=>"0123456789ABCDEF"[Math.floor(16*Math.random())])).join("")}`};yield S(t)}))));const r=yield $(7,t);r&&D(r,t,e,n)}));const nt=(t,e,n,o,r)=>{return a=void 0,i=void 0,c=function*(){let a,i;switch(t){case"By wins number (asc)":a="wins",i="ASC";break;case"By best time (asc)":a="time",i="ASC";break;case"By wins number (desc)":a="wins",i="DESC";break;default:a="time",i="DESC"}const s=yield I(e,E,a,i);s&&n(e,E,a,i,s,o,r)},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{r(c.next(t))}catch(t){e(t)}}function o(t){try{r(c.throw(t))}catch(t){e(t)}}function r(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(n,o)}r((c=c.apply(a,i||[])).next())}));var a,i,s,c};const ot=(t,e,n)=>{return o=void 0,r=void 0,i=function*(){const o=yield I(t,E,"id","ASC");o&&q(t,E,"id","ASC",o,e,n)},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{c(i.next(t))}catch(t){e(t)}}function s(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof a?o:new a((function(t){t(o)}))).then(n,s)}c((i=i.apply(o,r||[])).next())}));var o,r,a,i},rt=(t,e,n)=>{n.carsInGarage.setAttribute("style","display: none"),n.generalControls.setAttribute("style","display: none"),n.winners.setAttribute("style","display: flex"),e.classList.add("tab__active"),t.classList.remove("tab__active")},at=(t,e,n)=>{n.carsInGarage.setAttribute("style","display: flex"),n.generalControls.setAttribute("style","display: flex"),n.winners.setAttribute("style","display: none"),t.classList.add("tab__active"),e.classList.remove("tab__active")};var it,st,ct,dt;it=void 0,st=void 0,dt=function*(){const t=(()=>{const t=document.createElement("div");t.classList.add("wrapper");const e=document.createElement("div");e.classList.add("general-buttons-wrapper"),e.setAttribute("id","general-buttons-wrapper");const n=document.createElement("div");n.classList.add("cars-list"),n.setAttribute("id","cars-in-garage");const o=document.createElement("div");o.setAttribute("id","winners-table"),o.classList.add("winners-table");const r=document.createElement("div");r.setAttribute("id","overlay"),r.setAttribute("class","overlay");const a=document.createElement("div");return a.classList.add("tabs"),{wrapper:t,generalControls:e,carsInGarage:n,winners:o,popup:r,navigation:a}})(),e={editHandler:K,creationHandler:V,removeHandler:U,updateHandler:Y,startStopHandler:J,pagingHandler:Q,generateCarsHandler:et,sortHandler:nt,winnersPagingHandler:ot,showGarage:at,showWinners:rt},n=yield $(7,1);n&&W(n,1,t,e);const o=yield I(1,E,"id","ASC");o&&q(1,E,"id","ASC",o,t,e)},new((ct=void 0)||(ct=Promise))((function(t,e){function n(t){try{r(dt.next(t))}catch(t){e(t)}}function o(t){try{r(dt.throw(t))}catch(t){e(t)}}function r(e){var r;e.done?t(e.value):(r=e.value,r instanceof ct?r:new ct((function(t){t(r)}))).then(n,o)}r((dt=dt.apply(it,st||[])).next())}))})()})();